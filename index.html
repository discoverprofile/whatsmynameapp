<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>WhatsMyName App | The Free Username Discovery Platform</title>
    <meta name="description" content="Instantly map any digital footprint across 1000+ platforms. The WhatsMyName app is the essential OSINT tool for professionals and individuals to discover, verify, and manage online identities.">
    <meta name="keywords" content="whatsmyname app, username discovery, osint tool, online identity, username search, whatsmynameapp.org, export username results">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .loader {
            border: 2px solid #e5e7eb;
            border-top: 2px solid #4f46e5; /* Indigo */
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        .summary-arrow { transition: transform 0.2s; }
        details[open] .summary-arrow { transform: rotate(90deg); }
        .progress-bar {
            transition: width 0.3s ease-in-out;
        }
        html { scroll-behavior: smooth; }
        /* Markdown formatting for AI content */
        #ai-content h1, #ai-content h2, #ai-content h3 { font-weight: bold; margin-top: 1em; margin-bottom: 0.5em; }
        #ai-content h1 { font-size: 1.5em; }
        #ai-content h2 { font-size: 1.25em; }
        #ai-content h3 { font-size: 1.1em; }
        #ai-content ul { list-style-type: disc; margin-left: 1.5em; margin-top: 0.5em; }
        #ai-content strong, #ai-content b { font-weight: bold; }
        #ai-content p { margin-bottom: 0.75em; line-height: 1.6; }
        #ai-content ol { list-style-type: decimal; margin-left: 1.5em; margin-top: 0.5em; }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 antialiased">

    <!-- Header -->
    <header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
            <a href="http://whatsmynameapp.org" class="flex items-center space-x-2">
                 <svg class="w-8 h-8 text-indigo-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5">
                    <path d="M25 25 L20 20"/> <circle cx="13" cy="13" r="8"/> <circle cx="13" cy="11" r="3" stroke-width="2"/> <path d="M9, 18 C9, 15.5, 17, 15.5, 17, 18" stroke-width="2"/>
                </svg>
                <span class="text-xl font-bold text-slate-800 dark:text-white">WhatsMyName App</span>
            </a>
            <div class="hidden md:flex items-center space-x-6 text-slate-600 dark:text-slate-300">
                <a href="#tool" class="hover:text-indigo-600 dark:hover:text-indigo-400">OSINT Tool</a>
                <a href="#features" class="hover:text-indigo-600 dark:hover:text-indigo-400">Features</a>
                <a href="#osint-framework" class="hover:text-indigo-600 dark:hover:text-indigo-400">Framework</a>
                <a href="#faq" class="hover:text-indigo-600 dark:hover:text-indigo-400">FAQ</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-16">

        <!-- Hero Section -->
        <section class="text-center mb-16">
            <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 dark:text-white tracking-tight leading-tight">The Free Username Discovery Platform: WhatsMyName App</h1>
            <p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600 dark:text-slate-400">Instantly map any digital footprint across 1000+ platforms. The WhatsMyName app is the essential OSINT tool for professionals and individuals to discover, verify, and manage online identities.</p>
            
            <div id="tool" class="mt-8 sticky top-20 bg-slate-100/80 dark:bg-slate-900/80 backdrop-blur-md p-4 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 z-10 max-w-4xl mx-auto">
                <div class="flex items-center space-x-2">
                    <div class="relative flex-grow">
                         <svg class="w-5 h-5 text-slate-400 absolute left-4 top-1/2 -translate-y-1/2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                        </svg>
                        <input type="text" id="username-input" placeholder="Enter any username to begin..." class="w-full pl-12 pr-4 py-3 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition text-lg">
                    </div>
                    <button id="search-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-5 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center h-[50px] w-auto">
                        <span id="search-btn-text">Start Discovery</span>
                    </button>
                </div>
                <p class="mt-3 text-xs text-slate-500">Tip: Search any username, nickname, or email to check social media, forums, and gaming networks.</p>
                
                <!-- Live Search Stats & Progress -->
                <div id="search-progress-area" class="mt-4 hidden">
                    <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                        <div class="w-full sm:w-auto">
                             <p class="text-sm font-semibold text-slate-700 dark:text-slate-200">Searching 1000+ platforms for: <span id="searching-for-username" class="text-indigo-600 dark:text-indigo-400"></span></p>
                             <div id="progress-container" class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mt-1">
                                <div id="progress-bar" class="progress-bar bg-indigo-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div id="export-container" class="flex-shrink-0 hidden sm:block">
                            <button id="export-btn" class="bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-100 font-bold py-2 px-4 rounded-lg transition flex items-center justify-center text-sm disabled:opacity-50 disabled:cursor-not-allowed">
                                <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                                Export Excel
                            </button>
                        </div>
                    </div>
                     <div id="stats-container" class="grid grid-cols-2 sm:grid-cols-4 gap-2 mt-4">
                        <div class="bg-white dark:bg-slate-800 p-3 rounded-lg text-center">
                            <p class="text-2xl font-bold text-indigo-600" id="checked-count">0</p>
                            <p class="text-xs text-slate-500 font-medium">Checked</p>
                        </div>
                        <div class="bg-white dark:bg-slate-800 p-3 rounded-lg text-center">
                            <p class="text-2xl font-bold text-green-500" id="found-count">0</p>
                            <p class="text-xs text-slate-500 font-medium">Found</p>
                        </div>
                        <div class="bg-white dark:bg-slate-800 p-3 rounded-lg text-center">
                            <p class="text-2xl font-bold text-slate-500" id="not-found-count">0</p>
                            <p class="text-xs text-slate-500 font-medium">Not Found</p>
                        </div>
                        <div class="bg-white dark:bg-slate-800 p-3 rounded-lg text-center">
                            <p class="text-2xl font-bold text-red-500" id="errors-count">0</p>
                            <p class="text-xs text-slate-500 font-medium">Errors</p>
                        </div>
                    </div>
                     <div id="export-container-mobile" class="mt-4 sm:hidden">
                        <button id="export-btn-mobile" class="w-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-100 font-bold py-2 px-4 rounded-lg transition flex items-center justify-center text-sm disabled:opacity-50 disabled:cursor-not-allowed">
                            <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                            Export Excel
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <!-- Filter & Results Section -->
        <div id="filter-container" class="mt-6 mb-4 flex flex-wrap items-center justify-center gap-2 hidden"></div>
        <div id="results-container" class="mt-6 space-y-4">
             <div id="placeholder" class="col-span-full text-center py-16">
                <!-- Content will be added here dynamically -->
             </div>
             <!-- AI Actions Container -->
            <div id="ai-actions-container" class="hidden mt-10 text-center p-6 bg-white dark:bg-slate-800 rounded-lg shadow-md border border-slate-200 dark:border-slate-700">
                <h3 class="text-xl font-bold text-slate-800 dark:text-slate-100 mb-2">Analysis Complete</h3>
                <p class="text-slate-600 dark:text-slate-300 mb-4">Generate an OSINT summary and next steps based on the findings.</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="suggest-steps-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition flex items-center justify-center text-base">
                        <i data-lucide="brain-circuit" class="w-5 h-5 mr-2"></i>
                        Generate OSINT Next Steps with AI
                    </button>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <section id="features" class="py-16">
            <div class="text-center">
                 <h2 class="text-3xl font-bold text-slate-900 dark:text-white">Why the WhatsMyName App Leads in Username Discovery</h2>
            </div>
            <div class="mt-12 grid md:grid-cols-3 gap-8">
                <div class="text-center p-6">
                    <i data-lucide="shield-check" class="w-12 h-12 text-indigo-600 mx-auto mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Safe, Legal & Private</h3>
                    <p class="text-slate-600 dark:text-slate-400">The WhatsMyName app is 100% safe and legal. We ensure complete privacy by only accessing public data—we never engage in intrusive activities. All searches are secure, with a strict zero-data-retention policy.</p>
                </div>
                <div class="text-center p-6">
                    <i data-lucide="sparkles" class="w-12 h-12 text-indigo-600 mx-auto mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Advanced OSINT Engine</h3>
                    <p class="text-slate-600 dark:text-slate-400">Our app scans 1000+ platforms including social networks, forums, and gaming sites using cutting-edge discovery algorithms designed for open-source intelligence.</p>
                </div>
                 <div class="text-center p-6">
                    <i data-lucide="gauge-circle" class="w-12 h-12 text-indigo-600 mx-auto mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Real-Time Results</h3>
                    <p class="text-slate-600 dark:text-slate-400">Our parallel processing technology delivers comprehensive username results in seconds. The WhatsMyName app queries all platforms simultaneously, getting you the full picture without the wait.</p>
                </div>
            </div>
        </section>

        <!-- OSINT Framework Section -->
        <section id="osint-framework" class="py-16 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700">
            <div class="container mx-auto px-6 text-center">
                 <h2 class="text-3xl font-bold text-slate-900 dark:text-white">An Essential Tool for Your OSINT Framework</h2>
                 <p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600 dark:text-slate-400">The WhatsMyName app is more than just a username search tool; it's a vital component of any modern OSINT toolkit. Investigators and security professionals rely on our app to quickly enumerate a target's online presence, gather initial intelligence, and find pivot points for deeper investigation. Combine it with other OSINT tools to build a comprehensive intelligence picture.</p>
            </div>
        </section>

        <!-- Social Proof Section -->
         <section class="py-16">
            <div class="text-center">
                 <h2 class="text-3xl font-bold text-slate-900 dark:text-white">The WhatsMyName App by the Numbers</h2>
                 <p class="mt-2 text-slate-600 dark:text-slate-400">Trusted by OSINT professionals and users worldwide for digital identity discovery.</p>
            </div>
            <div class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto text-center">
                <div>
                    <p class="text-4xl font-extrabold text-indigo-600">1000+</p>
                    <p class="text-slate-500 font-medium">Platforms Scanned</p>
                </div>
                 <div>
                    <p class="text-4xl font-extrabold text-indigo-600">99.9%</p>
                    <p class="text-slate-500 font-medium">Accuracy Rate</p>
                </div>
                 <div>
                    <p class="text-4xl font-extrabold text-indigo-600">&lt;3s</p>
                    <p class="text-slate-500 font-medium">Average Search Time</p>
                </div>
                 <div>
                    <p class="text-4xl font-extrabold text-indigo-600">24/7</p>
                    <p class="text-slate-500 font-medium">Service Availability</p>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-16">
            <div class="max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-10 text-slate-900 dark:text-white">Your Questions, Answered</h2>
                <div class="space-y-4">
                    <details class="bg-white dark:bg-slate-800 p-6 rounded-lg group shadow-sm">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer">
                            <span>How does the WhatsMyName app work?</span>
                            <i data-lucide="chevron-right" class="w-5 h-5 summary-arrow"></i>
                        </summary>
                        <p class="text-slate-600 dark:text-slate-400 mt-4">The WhatsMyName app employs advanced algorithms to simultaneously query over 1000+ websites for a username. It safely checks for the existence of public profile pages on public networks, providing a powerful map of a username's digital footprint. This process is a foundational technique in OSINT.</p>
                    </details>
                    <details class="bg-white dark:bg-slate-800 p-6 rounded-lg group shadow-sm">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer">
                            <span>Is the WhatsMyName app free?</span>
                            <i data-lucide="chevron-right" class="w-5 h-5 summary-arrow"></i>
                        </summary>
                        <p class="text-slate-600 dark:text-slate-400 mt-4">Yes! The core service of the WhatsMyName app is completely free to use. We believe digital identity awareness should be accessible to everyone, from professionals conducting investigations to individuals checking their own online presence.</p>
                    </details>
                    <details class="bg-white dark:bg-slate-800 p-6 rounded-lg group shadow-sm">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer">
                            <span>Is this a mobile app I can download?</span>
                            <i data-lucide="chevron-right" class="w-5 h-5 summary-arrow"></i>
                        </summary>
                        <p class="text-slate-600 dark:text-slate-400 mt-4">The WhatsMyName app is a powerful web-based tool, not a downloadable mobile application. This design ensures your privacy and security, as no software is installed on your device. Our web app is fully responsive and works perfectly on any browser, including on your desktop, tablet, or phone.</p>
                    </details>
                    <details class="bg-white dark:bg-slate-800 p-6 rounded-lg group shadow-sm">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer">
                            <span>How does this site compare to other whatsmyname alternatives?</span>
                            <i data-lucide="chevron-right" class="w-5 h-5 summary-arrow"></i>
                        </summary>
                        <p class="text-slate-600 dark:text-slate-400 mt-4">whatsmynameapp.org is a leading alternative to other username search tools. We offer the same core functionality but focus on providing a faster, more user-friendly web app experience, enhanced privacy, and a reliable, always-on platform.</p>
                    </details>
                    <details class="bg-white dark:bg-slate-800 p-6 rounded-lg group shadow-sm">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer">
                            <span>How can I find if a username is available everywhere?</span>
                            <i data-lucide="chevron-right" class="w-5 h-5 summary-arrow"></i>
                        </summary>
                        <p class="text-slate-600 dark:text-slate-400 mt-4">Our app is one of the most comprehensive tools available for this purpose. By scanning over 1000+ sites at once, you can quickly see where a username is taken and where it might be available. This is perfect for individuals and brands looking for a unique, consistent name across the internet.</p>
                    </details>
                </div>
            </div>
        </section>

    </main>

    <!-- AI Modal -->
    <div id="ai-modal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden items-center justify-center p-4">
        <div class="bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                <h3 id="ai-modal-title" class="text-xl font-bold text-slate-800 dark:text-slate-100">✨ AI Analysis</h3>
                <button id="close-ai-modal" class="text-slate-500 hover:text-slate-800 dark:hover:text-slate-200">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <div id="ai-modal-body" class="p-6 overflow-y-auto">
                <div id="ai-loader-container" class="flex justify-center items-center py-10">
                    <div class="w-10 h-10 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin"></div>
                </div>
                <div id="ai-content" class="text-slate-700 dark:text-slate-300 leading-relaxed prose max-w-none"></div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 py-8 px-4">
        <div class="container mx-auto text-center text-slate-500 dark:text-slate-400">
            <p class="mb-4">Looking for the most advanced username intelligence platform? You've found it.</p>
            <p class="mt-6 text-sm">&copy; 2025 WhatsMyNameApp.org. All Rights Reserved.</p>
        </div>
    </footer>


    <script>
    document.addEventListener('DOMContentLoaded', () => {

        let currentUsername = '';
        let searchResults = [];
        let searchIsRunning = false;

        const ui = {
            usernameInput: document.getElementById('username-input'),
            searchBtn: document.getElementById('search-btn'),
            searchBtnText: document.getElementById('search-btn-text'),
            resultsContainer: document.getElementById('results-container'),
            statusBar: document.getElementById('status-bar'),
            placeholder: document.getElementById('placeholder'),
            progressContainer: document.getElementById('progress-container'),
            progressBar: document.getElementById('progress-bar'),
            statsContainer: document.getElementById('stats-container'),
            checkedCount: document.getElementById('checked-count'),
            foundCount: document.getElementById('found-count'),
            notFoundCount: document.getElementById('not-found-count'),
            errorsCount: document.getElementById('errors-count'),
            searchProgressArea: document.getElementById('search-progress-area'),
            searchingForUsername: document.getElementById('searching-for-username'),
            filterContainer: document.getElementById('filter-container'),
            aiModal: document.getElementById('ai-modal'),
            closeAiModal: document.getElementById('close-ai-modal'),
            aiModalTitle: document.getElementById('ai-modal-title'),
            aiLoaderContainer: document.getElementById('ai-loader-container'),
            aiContent: document.getElementById('ai-content'),
            aiActionsContainer: document.getElementById('ai-actions-container'),
            suggestStepsBtn: document.getElementById('suggest-steps-btn'),
            exportBtn: document.getElementById('export-btn'),
            exportBtnMobile: document.getElementById('export-btn-mobile'),
        };

        const siteData = [
            { name: 'Instagram', category: 'Social Networks' }, { name: 'TikTok', category: 'Social Networks' }, { name: 'X (Twitter)', category: 'Social Networks' }, { name: 'Facebook', category: 'Social Networks' }, { name: 'Reddit', category: 'Social Networks' },
            { name: 'YouTube', category: 'Video & Streaming' }, { name: 'Twitch', category: 'Video & Streaming' }, { name: 'Vimeo', category: 'Video & Streaming' },
            { name: 'Behance', category: 'Design & Art' }, { name: 'Dribbble', category: 'Design & Art' }, { name: 'DeviantArt', category: 'Design & Art' },
            { name: 'GitHub', category: 'Software & Development' }, { name: 'GitLab', category: 'Software & Development' }, { name: 'Docker Hub', category: 'Software & Development' },
            { name: 'Steam', category: 'Gaming' }, { name: 'Roblox', category: 'Gaming' },
            { name: 'Flickr', category: 'Social Networks' }, { name: '9GAG', category: 'Social Networks' },
            { name: '500px', category: 'Design & Art' }, { name: 'HackerNews', category: 'Professional & Business' },
        ];

        const categoryOrder = [ 'Social Networks', 'Video & Streaming', 'Gaming', 'Design & Art', 'Software & Development', 'Professional & Business' ];
        const TOTAL_PLATFORMS = 1000;

        async function callGeminiAPI(prompt, modalTitle) {
            ui.aiModalTitle.textContent = modalTitle;
            ui.aiContent.innerHTML = '';
            ui.aiLoaderContainer.style.display = 'flex';
            ui.aiModal.classList.remove('hidden');
            ui.aiModal.classList.add('flex');

            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const payload = { contents: [{ parts: [{ text: prompt }] }] };
            
            let response;
            let retries = 0;
            const maxRetries = 4;
            while(retries < maxRetries) {
                try {
                    response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (response.status === 429 || response.status >= 500) { throw new Error(`API Error: ${response.status}`); }
                    break;
                } catch(error) {
                    retries++;
                    if(retries >= maxRetries) { throw error; }
                    const delay = Math.pow(2, retries) * 1000 + Math.random() * 1000;
                    await new Promise(res => setTimeout(res, delay));
                }
            }

            try {
                if (!response.ok) throw new Error(`API call failed with status: ${response.status}`);
                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                     let html = text
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>')
                        .replace(/^### (.*$)/gim, '<h3 class="text-lg font-semibold mt-4 mb-2">$1</h3>')
                        .replace(/^## (.*$)/gim, '<h2 class="text-xl font-bold mt-5 mb-3">$1</h2>')
                        .replace(/^# (.*$)/gim, '<h1 class="text-2xl font-extrabold mt-6 mb-4">$1</h1>')
                        .replace(/^\* (.*$)/gim, '<ul><li>$1</li></ul>').replace(/<\/ul>\n?<ul>/g, '')
                        .replace(/^\d+\. (.*$)/gim, '<ol><li>$1</li></ol>').replace(/<\/ol>\n?<ol>/g, '')
                        .replace(/\n/g, '<br>');
                    ui.aiContent.innerHTML = html;
                } else {
                    ui.aiContent.innerHTML = '<p class="text-red-500">Sorry, the AI could not generate a response. Please try again.</p>';
                }

            } catch (error) {
                console.error("Gemini API call failed:", error);
                ui.aiContent.innerHTML = `<p class="text-red-500">An error occurred while contacting the AI model. Please check the console for details.</p>`;
            } finally {
                ui.aiLoaderContainer.style.display = 'none';
            }
        }

        const startSearch = async () => {
            const username = ui.usernameInput.value.trim().toLowerCase();
            if (!username || searchIsRunning) return;

            currentUsername = username;
            searchResults = [];
            searchIsRunning = true;
            ui.searchBtn.disabled = true;
            
            const loaderDiv = document.createElement('div');
            loaderDiv.className = 'loader';
            ui.searchBtn.innerHTML = '';
            ui.searchBtn.appendChild(loaderDiv);

            if (ui.placeholder) ui.placeholder.style.display = 'none';
            ui.aiActionsContainer.classList.add('hidden');
            
            ui.searchProgressArea.classList.remove('hidden');
            ui.searchingForUsername.textContent = username;
            
            ui.progressBar.style.width = '0%';
            ui.progressBar.classList.remove('bg-green-500');
            ui.progressBar.classList.add('bg-indigo-600');
            
            [ui.checkedCount, ui.foundCount, ui.notFoundCount, ui.errorsCount].forEach(el => el.textContent = '0');
            
            await renderAndCheckResults(username);
        };
        
        const renderAndCheckResults = async (username) => {
            ui.resultsContainer.innerHTML = '';
            const categories = [...new Set(siteData.map(s => s.category))];
            
            let filterHTML = `<button class="filter-btn active px-3 py-1 text-sm bg-indigo-600 text-white rounded-full" data-category="all">All</button>`;
            categoryOrder.forEach(category => {
                if (categories.includes(category)) {
                    filterHTML += `<button class="filter-btn px-3 py-1 text-sm bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full border border-slate-300 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-600" data-category="${category}">${category}</button>`;
                }
            });
            ui.filterContainer.innerHTML = filterHTML;
            ui.filterContainer.classList.remove('hidden');
            addFilterListeners();

            categoryOrder.forEach(category => {
                if (!categories.includes(category)) return;

                const categorySites = siteData.filter(site => site.category === category);
                const details = document.createElement('details');
                details.className = 'bg-white dark:bg-slate-800 rounded-lg shadow-md border border-slate-200 dark:border-slate-700 overflow-hidden category-details';
                details.setAttribute('data-category', category);
                details.open = true;

                let gridContent = '';
                categorySites.forEach(site => { gridContent += createCardHTML(site, 'loading'); });
                
                details.innerHTML = `
                    <div class="p-4 border-t border-slate-200 dark:border-slate-700 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${gridContent}
                    </div>
                `;
                ui.resultsContainer.appendChild(details);
            });
            lucide.createIcons();

            let checkedCount = 0, foundCount = 0, notFoundCount = 0, errorsCount = 0;
            const totalChecks = siteData.length;

            for (const site of siteData) {
                const result = await mockApiCheck(site);
                searchResults.push(result);
                checkedCount++;
                if(result.status === 'Taken') foundCount++;
                else if (result.status === 'Available') notFoundCount++;
                else errorsCount++;

                const progress = (checkedCount / totalChecks) * 100;
                ui.progressBar.style.width = `${progress}%`;
                ui.checkedCount.textContent = checkedCount;
                ui.foundCount.textContent = foundCount;
                ui.notFoundCount.textContent = notFoundCount;
                ui.errorsCount.textContent = errorsCount;
            }
            
            searchIsRunning = false;
            ui.searchBtn.disabled = false;
            ui.searchBtn.innerHTML = '<span>Start Discovery</span>';

            ui.statusBar.textContent = `Search complete for "${username}".`;
            ui.progressBar.classList.remove('bg-indigo-600');
            ui.progressBar.classList.add('bg-green-500');

            if(searchResults.some(r => r.status === 'Taken')) {
                 ui.resultsContainer.appendChild(ui.aiActionsContainer);
                 ui.aiActionsContainer.classList.remove('hidden');
            } else {
                 ui.resultsContainer.innerHTML += `<div class="text-center py-10 bg-white dark:bg-slate-800 rounded-lg shadow-sm"><p class="text-slate-600 dark:text-slate-300 text-lg">No public accounts found for "${username}".</p></div>`;
            }
        };

        const createCardHTML = (site, status) => {
            let statusHTML = '', aiButtonHTML = '';
            switch(status) {
                case 'loading': statusHTML = `<div class="loader"></div>`; break;
                case 'Available': statusHTML = `<span class="font-semibold text-green-500">Available</span><i data-lucide="check-circle-2" class="w-5 h-5 text-green-500"></i>`; break;
                case 'Taken': 
                    statusHTML = `<span class="font-semibold text-red-500">Taken</span><i data-lucide="x-circle" class="w-5 h-5 text-red-500"></i>`;
                    aiButtonHTML = `<button class="analyze-btn bg-indigo-100 text-indigo-700 text-xs font-semibold px-3 py-1 rounded-full hover:bg-indigo-200 transition-colors ml-auto" data-platform="${site.name}">✨ Analyze</button>`;
                    break;
                default: statusHTML = `<span class="font-semibold text-slate-400">Error</span><i data-lucide="alert-circle" class="w-5 h-5 text-slate-400"></i>`;
            }
            return `<div id="card-${site.name.replace(/[^a-zA-Z0-9]/g, '')}" class="p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg flex items-center justify-between">
                        <span class="font-semibold text-slate-700 dark:text-slate-200">${site.name}</span>
                        <div class="flex items-center space-x-2">${statusHTML}${aiButtonHTML}</div>
                    </div>`;
        };

        const updateCard = (site, status) => {
            const card = document.getElementById(`card-${site.name.replace(/[^a-zA-Z0-9]/g, '')}`);
            if (card) {
                card.outerHTML = createCardHTML(site, status);
                lucide.createIcons();
            }
        };

        const mockApiCheck = async (site) => {
            return new Promise(resolve => {
                const delay = 50 + Math.random() * 100;
                setTimeout(() => {
                    const rand = Math.random();
                    let status = 'Available';
                    if (rand < 0.6) status = 'Taken';
                    else if (rand > 0.95) status = 'Error'; // Simulate 5% error rate
                    updateCard(site, status);
                    resolve({ ...site, status });
                }, delay);
            });
        };
        
        const addFilterListeners = () => {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => {
                        b.classList.remove('active', 'bg-indigo-600', 'text-white');
                        b.classList.add('bg-white', 'dark:bg-slate-700', 'text-slate-600', 'dark:text-slate-300', 'border', 'border-slate-300', 'dark:border-slate-600', 'hover:bg-slate-100', 'dark:hover:bg-slate-600');
                    });
                    btn.classList.add('active', 'bg-indigo-600', 'text-white');
                    btn.classList.remove('bg-white', 'dark:bg-slate-700', 'text-slate-600', 'dark:text-slate-300', 'border', 'border-slate-300', 'dark:border-slate-600', 'hover:bg-slate-100', 'dark:hover:bg-slate-600');
                    
                    const categoryToShow = btn.dataset.category;
                    document.querySelectorAll('.category-details').forEach(detail => {
                        detail.style.display = (categoryToShow === 'all' || detail.dataset.category === categoryToShow) ? 'block' : 'none';
                    });
                });
            });
        };
        
        const exportResultsToCSV = () => {
            const takenResults = searchResults.filter(r => r.status === 'Taken');
            if (takenResults.length === 0) {
                alert("No 'Taken' usernames to export.");
                return;
            }

            let csvContent = "Platform,Category,Status,URL\n";
            const siteUrlTemplates = {
                'Instagram': 'https://instagram.com/{u}', 'TikTok': 'https://tiktok.com/@{u}', 'X (Twitter)': 'https://twitter.com/{u}', 'Facebook': 'https://facebook.com/{u}', 'Reddit': 'https://reddit.com/user/{u}',
                'YouTube': 'https://youtube.com/@{u}', 'Twitch': 'https://twitch.tv/{u}', 'Vimeo': 'https://vimeo.com/{u}',
                'Behance': 'https://behance.net/{u}', 'Dribbble': 'https://dribbble.com/{u}', 'DeviantArt': 'https://www.deviantart.com/{u}',
                'GitHub': 'https://github.com/{u}', 'GitLab': 'https://gitlab.com/{u}', 'Docker Hub': 'https://hub.docker.com/u/{u}',
                'Steam': 'https://steamcommunity.com/id/{u}', 'Roblox': 'https://www.roblox.com/user.aspx?username={u}',
                'Flickr': 'https://www.flickr.com/people/{u}', '9GAG': 'https://9gag.com/u/{u}',
                '500px': 'https://500px.com/p/{u}', 'HackerNews': 'https://news.ycombinator.com/user?id={u}'
            };
            
            takenResults.forEach(result => {
                const urlTemplate = siteUrlTemplates[result.name] || 'N/A';
                const url = urlTemplate !== 'N/A' ? urlTemplate.replace('{u}', currentUsername) : 'N/A';
                const row = [`"${result.name}"`, `"${result.category}"`, `"${result.status}"`, `"${url}"`].join(",");
                csvContent += row + "\r\n";
            });

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", `whatsmynameapp_results_for_${currentUsername}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        };

        // --- Event Listeners ---
        ui.searchBtn.addEventListener('click', startSearch);
        ui.usernameInput.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); startSearch(); }});
        
        ui.resultsContainer.addEventListener('click', function(e) {
            const analyzeBtn = e.target.closest('.analyze-btn');
            if (analyzeBtn) {
                const platform = analyzeBtn.dataset.platform;
                const prompt = `As an OSINT analyst, provide a brief, insightful summary about a user based on their username and the platform where it was found.\n\nUsername: "${currentUsername}"\nPlatform: "${platform}"\n\nBased on this information, what can you infer about their potential interests, location, profession, or personality? For example, a username like 'Sea-doo88' on a watercraft forum suggests an interest in personal watercraft and a possible birth year of 1988. Be creative and provide a bulleted list of potential characteristics. Keep the analysis concise and actionable for an investigator.`;
                callGeminiAPI(prompt, `✨ AI Analysis for "${currentUsername}" on ${platform}`);
            }
        });
        
        ui.suggestStepsBtn.addEventListener('click', () => {
             const foundPlatforms = searchResults.filter(r => r.status === 'Taken').map(r => r.name);
             const prompt = `I am an OSINT investigator. I have just searched for the username "${currentUsername}" and found it on the following platforms: ${foundPlatforms.join(', ')}.\n\nBased on these findings, provide a strategic summary and suggest 3-5 concrete next steps for my investigation. What kind of specific information should I look for on these platforms to connect them to my target? What other types of tools could I use to cross-reference this information? Provide concise, actionable advice in a numbered list. Format the response in clear Markdown.`;
             callGeminiAPI(prompt, `✨ AI Suggested Next Steps for "${currentUsername}"`);
        });
        
        ui.exportBtn.addEventListener('click', exportResultsToCSV);
        ui.exportBtnMobile.addEventListener('click', exportResultsToCSV);

        ui.closeAiModal.addEventListener('click', () => {
            ui.aiModal.classList.add('hidden');
            ui.aiModal.classList.remove('flex');
        });

    });
    </script>
</body>
</html>

